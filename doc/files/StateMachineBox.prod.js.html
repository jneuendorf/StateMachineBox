<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>StateMachineBox.prod.js - StateMachineBox</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="StateMachineBox" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/StateMachineBox.html">StateMachineBox</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: StateMachineBox.prod.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
// Generated by CoffeeScript 1.9.3

/**
* @class StateMachineBox
*
* @constructor
*
*
 */

(function() {
  var SMB,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i &lt; l; i++) { if (i in this &amp;&amp; this[i] === item) return i; } return -1; },
    slice = [].slice,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  window.StateMachineBox = (function() {
    StateMachineBox.MODES = {
      SINGLE: &quot;single&quot;,
      MANY: &quot;many&quot;
    };

    StateMachineBox.MODE = StateMachineBox.MODES.SINGLE;

    StateMachineBox.FADE_TIME = 180;

    StateMachineBox.DEFAULT_CSS_CLASS = &quot;default&quot;;

    StateMachineBox.BUTTON_ACTIONS = {
      OK: &quot;CLOSE&quot;,
      CANCEL: &quot;CANCEL&quot;,
      NEXT: &quot;NEXT&quot;,
      PREV: &quot;PREV&quot;
    };

    StateMachineBox.BUTTONS = {
      OK: &quot;&lt;div class=\&quot;button ok\&quot;&gt;ok&lt;/div&gt;&quot;,
      CANCEL: &quot;&lt;div class=\&quot;button cancel\&quot;&gt;cancel&lt;/div&gt;&quot;,
      NEXT: &quot;&lt;div class=\&quot;button next\&quot;&gt;next&lt;/div&gt;&quot;,
      PREV: &quot;&lt;div class=\&quot;button prev\&quot;&gt;prev&lt;/div&gt;&quot;
    };

    StateMachineBox.ACTIONS = {
      CLOSE: function() {
        return this.close();
      },
      OK: function() {
        this.close(true);
        if (this.onOk instanceof Function) {
          this.onOk();
        }
        return this;
      },
      CANCEL: function() {
        this.close(true);
        if (this.onCancel instanceof Function) {
          this.onCancel();
        }
        return this;
      },
      CHANGE: function(idx) {
        return this.change(idx);
      },
      NEXT: function() {
        return this.next();
      },
      PREV: function() {
        return this.prev();
      }
    };

    StateMachineBox.BUTTON_COLORS = [&quot;#222222&quot;, &quot;#9FA39F&quot;, &quot;#B9BCB9&quot;, &quot;#D3D5D3&quot;];

    StateMachineBox._popups = [];

    StateMachineBox._activePopup = null;

    if (DEBUG) {
      StateMachineBox._localeKeys = [&quot;ok&quot;, &quot;cancel&quot;, &quot;next&quot;, &quot;prev&quot;];
      StateMachineBox._languageKeys = [&quot;aa&quot;, &quot;ab&quot;, &quot;ae&quot;, &quot;af&quot;, &quot;ak&quot;, &quot;am&quot;, &quot;an&quot;, &quot;ar&quot;, &quot;as&quot;, &quot;av&quot;, &quot;ay&quot;, &quot;az&quot;, &quot;ba&quot;, &quot;be&quot;, &quot;bg&quot;, &quot;bh&quot;, &quot;bi&quot;, &quot;bm&quot;, &quot;bn&quot;, &quot;bo&quot;, &quot;br&quot;, &quot;bs&quot;, &quot;ca&quot;, &quot;ce&quot;, &quot;ch&quot;, &quot;co&quot;, &quot;cr&quot;, &quot;cs&quot;, &quot;cu&quot;, &quot;cv&quot;, &quot;cy&quot;, &quot;da&quot;, &quot;de&quot;, &quot;dv&quot;, &quot;dz&quot;, &quot;ee&quot;, &quot;el&quot;, &quot;en&quot;, &quot;eo&quot;, &quot;es&quot;, &quot;et&quot;, &quot;eu&quot;, &quot;fa&quot;, &quot;ff&quot;, &quot;fi&quot;, &quot;fj&quot;, &quot;fo&quot;, &quot;fr&quot;, &quot;fy&quot;, &quot;ga&quot;, &quot;gd&quot;, &quot;gl&quot;, &quot;gn&quot;, &quot;gu&quot;, &quot;gv&quot;, &quot;ha&quot;, &quot;he&quot;, &quot;hi&quot;, &quot;ho&quot;, &quot;hr&quot;, &quot;ht&quot;, &quot;hu&quot;, &quot;hy&quot;, &quot;hz&quot;, &quot;ia&quot;, &quot;id&quot;, &quot;ie&quot;, &quot;ig&quot;, &quot;ii&quot;, &quot;ik&quot;, &quot;io&quot;, &quot;is&quot;, &quot;it&quot;, &quot;iu&quot;, &quot;ja&quot;, &quot;jv&quot;, &quot;ka&quot;, &quot;kg&quot;, &quot;ki&quot;, &quot;kj&quot;, &quot;kk&quot;, &quot;kl&quot;, &quot;km&quot;, &quot;kn&quot;, &quot;ko&quot;, &quot;kr&quot;, &quot;ks&quot;, &quot;ku&quot;, &quot;kv&quot;, &quot;kw&quot;, &quot;ky&quot;, &quot;la&quot;, &quot;lb&quot;, &quot;lg&quot;, &quot;li&quot;, &quot;ln&quot;, &quot;lo&quot;, &quot;lt&quot;, &quot;lu&quot;, &quot;lv&quot;, &quot;mg&quot;, &quot;mh&quot;, &quot;mi&quot;, &quot;mk&quot;, &quot;ml&quot;, &quot;mn&quot;, &quot;mr&quot;, &quot;ms&quot;, &quot;mt&quot;, &quot;my&quot;, &quot;na&quot;, &quot;nb&quot;, &quot;nd&quot;, &quot;ne&quot;, &quot;ng&quot;, &quot;nl&quot;, &quot;nn&quot;, &quot;no&quot;, &quot;nr&quot;, &quot;nv&quot;, &quot;ny&quot;, &quot;oc&quot;, &quot;oj&quot;, &quot;om&quot;, &quot;or&quot;, &quot;os&quot;, &quot;pa&quot;, &quot;pi&quot;, &quot;pl&quot;, &quot;ps&quot;, &quot;pt&quot;, &quot;qu&quot;, &quot;rm&quot;, &quot;rn&quot;, &quot;ro&quot;, &quot;ru&quot;, &quot;rw&quot;, &quot;sa&quot;, &quot;sc&quot;, &quot;sd&quot;, &quot;se&quot;, &quot;sg&quot;, &quot;si&quot;, &quot;sk&quot;, &quot;sl&quot;, &quot;sm&quot;, &quot;sn&quot;, &quot;so&quot;, &quot;sq&quot;, &quot;sr&quot;, &quot;ss&quot;, &quot;st&quot;, &quot;su&quot;, &quot;sv&quot;, &quot;sw&quot;, &quot;ta&quot;, &quot;te&quot;, &quot;tg&quot;, &quot;th&quot;, &quot;ti&quot;, &quot;tk&quot;, &quot;tl&quot;, &quot;tn&quot;, &quot;to&quot;, &quot;tr&quot;, &quot;ts&quot;, &quot;tt&quot;, &quot;tw&quot;, &quot;ty&quot;, &quot;ug&quot;, &quot;uk&quot;, &quot;ur&quot;, &quot;uz&quot;, &quot;ve&quot;, &quot;vi&quot;, &quot;vo&quot;, &quot;wa&quot;, &quot;wo&quot;, &quot;xh&quot;, &quot;yi&quot;, &quot;yo&quot;, &quot;za&quot;, &quot;zh&quot;, &quot;zu&quot;];
    }

    StateMachineBox._$cache = {
      popup: $(&quot;&lt;div class=\&quot;popup\&quot;&gt;\n    &lt;div class=\&quot;content\&quot;&gt;\n        &lt;div class=\&quot;close\&quot; /&gt;\n        &lt;div class=\&quot;loader\&quot; /&gt;\n        &lt;div class=\&quot;header\&quot;&gt;\n            &lt;div class=\&quot;headline\&quot; /&gt;\n        &lt;/div&gt;\n        &lt;div class=\&quot;bodyWrapper\&quot; /&gt;\n        &lt;div class=\&quot;navigation\&quot; /&gt;\n        &lt;div class=\&quot;footer\&quot; /&gt;\n    &lt;/div&gt;\n&lt;/div&gt;&quot;),
      overlay: $(&quot;&lt;div class=\&quot;popup overlay\&quot; /&gt;&quot;)
    };

    StateMachineBox.locale = {};

    StateMachineBox.init = function() {
      this.setLocale(&quot;en&quot;, {
        ok: &quot;ok&quot;,
        cancel: &quot;cancel&quot;,
        next: &quot;next&quot;,
        prev: &quot;previous&quot;
      });
      this.setLocale(&quot;de&quot;, {
        ok: &quot;ok&quot;,
        cancel: &quot;abbrechen&quot;,
        next: &quot;weiter&quot;,
        prev: &quot;zur√ºck&quot;
      });
      return this;
    };

    StateMachineBox.getTopMost = function() {
      var divs, j, len, popup, popups;
      popups = this._popups;
      divs = $();
      for (j = 0, len = popups.length; j &lt; len; j++) {
        popup = popups[j];
        divs = divs.add(popup.div);
      }
      return popups[divs.index(divs.filter(&quot;:visible:last&quot;))] || null;
    };

    StateMachineBox._setActive = function(popup) {
      this._activePopup = popup;
      return this;
    };

    StateMachineBox.getActive = function() {
      return this._activePopup || this.getTopMost();
    };

    StateMachineBox.setLocale = function(language, values, redraw) {
      var j, k, key, l, len, len1, len2, popup, ref, ref1, ref2;
      if (redraw == null) {
        redraw = true;
      }
      if (DEBUG) {
        if (indexOf.call(this._languageKeys, language) &gt;= 0) {
          ref = this._localeKeys;
          for (j = 0, len = ref.length; j &lt; len; j++) {
            key = ref[j];
            if (values[key] == null) {
              throw new Error(&quot;StateMachineBox.setLocale: Missing at least 1 key &#x27;&quot; + key + &quot;&#x27; for locale settings!&quot;);
            }
          }
          this.locale[language] = values;
          ref1 = this._popups;
          for (k = 0, len1 = ref1.length; k &lt; len1; k++) {
            popup = ref1[k];
            popup.redraw();
          }
          return this;
        }
        throw new Error(&quot;StateMachineBox.setLocale: Invalid language &#x27;&quot; + language + &quot;&#x27; given!&quot;);
      }
      this.locale[language] = values;
      ref2 = this._popups;
      for (l = 0, len2 = ref2.length; l &lt; len2; l++) {
        popup = ref2[l];
        popup.redraw();
      }
      return this;
    };

    StateMachineBox.getLocale = function(language, key) {
      var ref;
      if (DEBUG) {
        if (((ref = this.locale[language]) != null ? ref[key] : void 0) != null) {
          return this.locale[language][key];
        }
        if ((key == null) &amp;&amp; (this.locale[language] != null)) {
          console.info(&quot;StateMachineBox.getLocale: No key given. Returning all keys for &#x27;&quot; + language + &quot;&#x27;.&quot;);
          return this.locale[language];
        }
        throw new Error(&quot;StateMachineBox.getLocale: language &#x27;&quot; + language + &quot;&#x27; not set or key &#x27;&quot; + key + &quot;&#x27; not found!&quot;);
      }
      if (key != null) {
        return this.locale[language][key] || null;
      }
      return this.locale[language];
    };

    StateMachineBox.registerPopup = function(popup) {
      if (indexOf.call(this._popups, popup) &lt; 0) {
        this._popups.push(popup);
      }
      return this;
    };

    StateMachineBox.unregisterPopup = function(popup) {
      var i, p;
      this._popups = (function() {
        var j, len, ref, results;
        ref = this._popups;
        results = [];
        for (i = j = 0, len = ref.length; j &lt; len; i = ++j) {
          p = ref[i];
          if (p !== popup) {
            results.push(p);
          }
        }
        return results;
      }).call(this);
      return this;
    };

    StateMachineBox[&quot;new&quot;] = function(stateMachineConfig, headline, options) {
      if (options == null) {
        options = {};
      }
      return new this(stateMachineConfig, headline, options);
    };

    function StateMachineBox(stateMachineConfig, headline, options) {
      var callback, callbackName, event, j, k, len, len1, ref, ref1, ref2, self;
      if (options == null) {
        options = {};
      }
      if (DEBUG) {
        if ((stateMachineConfig == null) || (stateMachineConfig.events == null)) {
          throw new Error(&quot;StateMachineBox::constructor: No (valid) state machine configuration given!&quot;);
        }
        ref = stateMachineConfig.events;
        for (j = 0, len = ref.length; j &lt; len; j++) {
          event = ref[j];
          if (this[event.name] != null) {
            throw new Error(&quot;StateMachineBox::constructor: Trying to create event &#x27;&quot; + event.name + &quot;&#x27; but that property already exists in popup!!&quot;);
          }
        }
        ref1 = stateMachineConfig.callbacks;
        for (callbackName in ref1) {
          callback = ref1[callbackName];
          if (this[callbackName] != null) {
            throw new Error(&quot;StateMachineBox::constructor: Trying to create callback &#x27;&quot; + callbackName + &quot;&#x27; but that property already exists in popup!!&quot;);
          }
        }
      }
      this.headline = headline;
      this.options = options;
      this.closeButtonAction = options.closeButtonAction || &quot;close&quot;;
      this.onClose = options.onClose;
      this.onOk = options.onOk;
      this.onCancel = options.onCancel;
      this.onNext = options.onNext;
      this.onPrev = options.onPrev;
      this.onChange = options.onChange;
      this.beforeClose = options.beforeClose;
      this.beforeNext = options.beforeNext;
      this.beforePrev = options.beforePrev;
      this.beforeChange = options.beforeChange;
      this.onFailure = options.onFailure;
      this.theme = options.theme || &quot;default&quot;;
      this.locale = options.locale || &quot;en&quot;;
      this.showNavigation = options.showNavigation || false;
      this.container = options.container || $(document.body);
      this.data = {};
      this.div = this.constructor._$cache.popup.clone();
      this.overlay = this.constructor._$cache.overlay.clone();
      if ((options.width != null) &amp;&amp; (options.height != null)) {
        this.div.css({
          width: options.width,
          height: options.height
        });
      }
      this.loader = null;
      this.bodyWidth = parseFloat(this.options.width) || 800;
      this.bodyPadding = {
        top: 10,
        right: 40,
        bottom: 10,
        left: 40
      };
      this._active = false;
      stateMachineConfig.target = this;
      this.stateMachineConfig = stateMachineConfig;
      this.bodyWrapper = null;
      this.contents = {};
      ref2 = stateMachineConfig.events;
      for (k = 0, len1 = ref2.length; k &lt; len1; k++) {
        event = ref2[k];
        if (event.content != null) {
          this.contents[event.to] = event.content;
        }
      }
      self = this;
      if (stateMachineConfig.callbacks == null) {
        stateMachineConfig.callbacks = {};
      }
      stateMachineConfig.callbacks.onenterstate = function() {
        var event, from, params, to;
        event = arguments[0], from = arguments[1], to = arguments[2], params = 4 &lt;= arguments.length ? slice.call(arguments, 3) : [];
        console.log(&quot;onenterstate&quot;, arguments);
        if (self.beforeChange instanceof Function &amp;&amp; self.beforeChange(to) === false) {
          return false;
        }
        self.changeContent(event, from, to);
        return true;
      };
      StateMachine.create(stateMachineConfig);
      this.constructor.registerPopup(this);
    }

    StateMachineBox.prototype._setAsActive = function() {
      this.constructor._setActive(this);
      return this;
    };

    StateMachineBox.prototype.show = function(callback) {
      this.div.fadeIn(FADE_TIME, callback);
      return this;
    };

    StateMachineBox.prototype.hide = function(callback) {
      this.div.fadeOut(FADE_TIME, callback);
      return this;
    };

    StateMachineBox.prototype.showOverlay = function(callback) {
      this.overlay.fadeIn(FADE_TIME, callback);
      return this;
    };

    StateMachineBox.prototype.hideOverlay = function(callback) {
      this.overlay.fadeOut(FADE_TIME, callback);
      return this;
    };

    StateMachineBox.prototype.showLoader = function() {
      this.loader.fadeIn(FADE_TIME);
      return this;
    };

    StateMachineBox.prototype.hideLoader = function() {
      this.loader.fadeOut(FADE_TIME);
      return this;
    };

    StateMachineBox.prototype.fireAction = function() {
      var action, name, params;
      name = arguments[0], params = 2 &lt;= arguments.length ? slice.call(arguments, 1) : [];
      name = name.toUpperCase();
      if ((action = this.constructor.ACTIONS[name]) != null) {
        return action.apply(this, params);
      }
      throw new Error(&quot;Popup::fireAction: No action with name &#x27;&quot; + name + &quot;&#x27; found!&quot;);
    };

    StateMachineBox.prototype.close = function(ignoreCallback) {
      var self;
      if (ignoreCallback == null) {
        ignoreCallback = false;
      }
      if (!ignoreCallback &amp;&amp; this.beforeClose instanceof Function &amp;&amp; this.beforeClose() === false) {
        return false;
      }
      self = this;
      this.hide(function() {
        self.div.remove();
        return true;
      });
      this.hideOverlay(function() {
        self.overlay.remove();
        return true;
      });
      this.constructor.unregisterPopup(this);
      if (!ignoreCallback) {
        if (typeof this.onClose === &quot;function&quot;) {
          this.onClose();
        }
      }
      return this;
    };

    StateMachineBox.prototype.remove = function() {
      return this.close.apply(this, arguments);
    };

    StateMachineBox.prototype.changeContent = function(event, from, to) {
      var body, content;
      body = $(&quot;&lt;div class=\&quot;body\&quot; style=\&quot;width: &quot; + (this.bodyWidth - this.bodyPadding.left - this.bodyPadding.right) + &quot;px;\&quot; /&gt;&quot;);
      content = this.contents[to];
      if (content == null) {
        throw new Error(&quot;StateMachineBox::changeContent: No content given for &#x27;&quot; + to + &quot;&#x27;!&quot;);
      }
      if (this.bodyWrapper == null) {
        this.bodyWrapper = this.div.find(&quot;.bodyWrapper&quot;);
      }
      body.append(content);
      if (event === &quot;back&quot;) {
        this.bodyWrapper.prepend(body).css(&quot;margin-left&quot;, &quot;-&quot; + this.bodyWidth + &quot;px&quot;).animate({
          &quot;margin-left&quot;: &quot;0px&quot;
        }, 400, &quot;swing&quot;, function() {
          $(this).children().eq(1).detach();
          return true;
        });
      } else if (from !== &quot;none&quot;) {
        this.bodyWrapper.append(body).animate({
          &quot;margin-left&quot;: &quot;-&quot; + this.bodyWidth + &quot;px&quot;
        }, 400, &quot;swing&quot;, function() {
          $(this).children().eq(0).detach();
          $(this).css(&quot;margin-left&quot;, &quot;0px&quot;);
          return true;
        });
      }
      return this;
    };

    StateMachineBox.prototype.currentContent = function() {
      return this.contents[this.current];
    };

    StateMachineBox.prototype.draw = function() {
      var action, b, body, button, buttons, content, headlineDiv, idx, j, lastColor, len, self;
      if (this.constructor.MODE === this.constructor.MODES.SINGLE &amp;&amp; (this.constructor.getActive() != null)) {
        console.warn(&quot;Popup::draw: tried to draw more than 1 popup but mode is set to &#x27;single&#x27;!&quot;);
        return this;
      }
      self = this;
      if (this.headline) {
        headlineDiv = &quot;&lt;div class=\&quot;header companyBGColor\&quot;&gt;\n    &lt;div class=\&quot;headline noselect\&quot;&gt;&quot; + this.headline + &quot;&lt;/div&gt;\n&lt;/div&gt;&quot;;
      } else {
        headlineDiv = &quot;&quot;;
      }
      this.div.empty().append(&quot;&lt;div class=\&quot;content\&quot;&gt;\n    &lt;div class=\&quot;close\&quot; /&gt;\n    &lt;div class=\&quot;loader\&quot; /&gt;\n    &quot; + headlineDiv + &quot;\n    &lt;div class=\&quot;bodyWrapper\&quot; /&gt;\n    &lt;div class=\&quot;navigation\&quot; /&gt;\n    &lt;div class=\&quot;footer\&quot; /&gt;\n&lt;/div&gt;&quot;);
      this.div.find(&quot;.overlay, .close&quot;).click(function() {
        self.fireAction(self.closeButtonAction);
        return true;
      });
      this.div.mousedown(function() {
        self._setAsActive();
        return true;
      });
      this.navigation = this.div.find(&quot;.navigation&quot;);
      this.loader = this.div.find(&quot;.loader&quot;);
      this.footer = this.div.find(&quot;.footer&quot;);
      buttons = this.options.buttons || [];
      for (idx = j = 0, len = buttons.length; j &lt; len; idx = ++j) {
        button = buttons[idx];
        if (!(button != null)) {
          continue;
        }
        action = null;
        if (typeof button === &quot;string&quot;) {
          b = button.toUpperCase();
          button = this.constructor.BUTTONS[b];
          action = this.constructor.ACTIONS[this.constructor.BUTTON_ACTIONS[b]];
        } else if ((button.button != null) &amp;&amp; (button.action != null)) {
          b = button;
          button = this.constructor.BUTTONS[b.button.toUpperCase()];
          action = this.constructor.ACTIONS[b.action.toUpperCase()];
        } else {
          console.warn(&quot;Invalid button configuration for Popup!&quot;);
          continue;
        }
        if (action != null) {
          button = $(button);
          lastColor = this.constructor.BUTTON_COLORS[idx];
          button.css({
            &quot;background-color&quot;: lastColor
          });
          (function(action) {
            return button.click(function() {
              action.call(self);
              return true;
            });
          })(action);
          this.footer.append(button);
        }
      }
      this.footer.css(&quot;background-color&quot;, lastColor);
      self = this;
      if (!this.showNavigation) {
        this.navigation.addClass(&quot;hidden&quot;);
      }
      this.init();
      content = this.contents[this.current];
      if (content == null) {
        throw new Error(&quot;StateMachineBox::draw: No content found for &#x27;&quot; + this.current + &quot;&#x27;!&quot;);
      }
      body = $(&quot;&lt;div class=\&quot;body\&quot; style=\&quot;width: &quot; + (this.bodyWidth - this.bodyPadding.left - this.bodyPadding.right) + &quot;px;\&quot; /&gt;&quot;);
      body.append(content);
      this.bodyWrapper.append(body);
      if (this.constructor.MODE === this.constructor.MODES.MANY) {
        this.div.draggable({
          handle: &quot;.header&quot;
        }).addClass(&quot;draggable&quot;);
      } else if (this.constructor.MODE === this.constructor.MODES.SINGLE) {
        this.container.append(this.overlay.click(function() {
          self.fireAction(&quot;cancel&quot;);
          return true;
        }));
      }
      this.container.append(this.div);
      this._setAsActive();
      return this;
    };

    StateMachineBox.prototype.redraw = function() {
      return this;
    };

    StateMachineBox.prototype.fireEvent = function() {
      var name, params;
      name = arguments[0], params = 2 &lt;= arguments.length ? slice.call(arguments, 1) : [];
      if (this[name] instanceof Function) {
        this[name].apply(this, params);
        return this;
      }
      console.warn(&quot;StateStatePopup::fireEvent: There is no event called &#x27;&quot; + name + &quot;&#x27;! Use onFailure() to catch that!&quot;);
      if (typeof this.onFailure === &quot;function&quot;) {
        this.onFailure(name);
      }
      return this;
    };

    StateMachineBox.prototype.next = function() {
      var event, foundEvents, j, len, ref;
      if (this.beforeNext instanceof Function &amp;&amp; this.beforeNext() === false) {
        return false;
      }
      foundEvents = [];
      ref = this.stateMachineConfig.events;
      for (j = 0, len = ref.length; j &lt; len; j++) {
        event = ref[j];
        if (event.from === this.current &amp;&amp; event.name !== &quot;back&quot;) {
          foundEvents.push(event);
        }
      }
      if (foundEvents.length === 1) {
        this.fireEvent(foundEvents.first.name);
        return this;
      }
      if (foundEvents.length === 0) {
        console.warn(&quot;StateMachineBox::next: There is no event for &#x27;&quot; + this.current + &quot;&#x27;! Can&#x27;t go any further! Use onFailure() to catch that!&quot;);
        if (typeof this.onFailure === &quot;function&quot;) {
          this.onFailure(&quot;next&quot;);
        }
        return this;
      }
      console.warn(&quot;StateMachineBox::next: More than 1 event for &#x27;&quot; + this.current + &quot;&#x27;: [&quot; + ((function() {
        var k, len1, results;
        results = [];
        for (k = 0, len1 = foundEvents.length; k &lt; len1; k++) {
          event = foundEvents[k];
          results.push(event.name);
        }
        return results;
      })()) + &quot;]! Can&#x27;t decide where to go! Use onFailure() to catch that!&quot;);
      if (typeof this.onFailure === &quot;function&quot;) {
        this.onFailure(&quot;next&quot;);
      }
      return this;
    };

    StateMachineBox.prototype.prev = function() {
      var e;
      if (this.beforePrev instanceof Function &amp;&amp; this.beforePrev() === false) {
        return false;
      }
      try {
        this.back();
        return this;
      } catch (_error) {
        e = _error;
        console.warn(&quot;StateMachineBox::prev: Cannot go to &#x27;prev&#x27; because no back route was defined! Define it with &#x27;{ name: &#x27;back&#x27;, from: &#x27;prevState&#x27;, to: &#x27;returnState&#x27; }&#x27; ;) Use onFailure() to catch that!&quot;);
        console.warn(e);
        if (typeof this.onFailure === &quot;function&quot;) {
          this.onFailure(&quot;prev&quot;);
        }
        return this;
      }
    };

    StateMachineBox.prototype.change = function(targetState) {
      var event, j, len, ref;
      if (this.beforeChange instanceof Function &amp;&amp; this.beforeChange(idx) === false) {
        return false;
      }
      ref = this.stateMachineConfig.events;
      for (j = 0, len = ref.length; j &lt; len; j++) {
        event = ref[j];
        if (!(event.from === this.current &amp;&amp; event.to === targetState)) {
          continue;
        }
        this.fireEvent(event.name);
        if (this.onChange instanceof Function) {
          this.onChange.call(this, event.from, targetState);
        }
        return this;
      }
      console.warn(&quot;StateMachineBox::change: Cannot go to &#x27;&quot; + targetState + &quot;&#x27; from &#x27;&quot; + this.current + &quot;&#x27;! Use onFailure() to catch that!&quot;);
      if (typeof this.onFailure === &quot;function&quot;) {
        this.onFailure(&quot;change&quot;);
      }
      return this;
    };

    return StateMachineBox;

  })();

  StateMachineBox.init();

  SMB = (function(superClass) {
    extend(SMB, superClass);

    function SMB() {
      return SMB.__super__.constructor.apply(this, arguments);
    }

    return SMB;

  })(StateMachineBox);

}).call(this);

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
